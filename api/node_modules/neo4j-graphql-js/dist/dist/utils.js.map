{"version":3,"sources":["../utils.js"],"names":["Object","defineProperty","exports","value","relationDirective","cypherDirective","undefined","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_toConsumableArray2","_toConsumableArray3","_assign","_assign2","_stringify","_stringify2","parseArgs","cypherDirectiveArgs","isMutation","isAddRelationshipMutation","typeIdentifiers","isGraphqlScalarType","isArrayType","lowFirstLetter","innerType","innerFilterParams","extractQueryResult","computeSkipLimit","extractSelections","fixParamsForAddRelationshipMutation","obj","__esModule","default","args","variableValues","length","reduce","acc","arg","kind","name","parseInt","parseFloat","getDefaultArguments","fieldName","schemaType","_fields","defaultValue","err","variable","headSelection","resolveInfo","defaultArgs","queryArgs","arguments","replace","substring","operation","startsWith","schema","getMutationType","getFields","astNode","directives","filter","x","returnType","typeName","toString","variableName","type","constructor","word","charAt","toLowerCase","slice","ofType","directiveWithArgs","directiveName","fieldDirective","find","e","directiveArgument","directive","ret","apply","concat","map","key","selections","queryParams","filters","filterValue","join","argumentValue","selection","a","_ref2","records","_typeIdentifiers","record","get","first","offset","fragments","cur","selectionSet","params","mutationMeta","fromTypeArg","toTypeArg","Error","fromType","toType","fromVar","toVar","fromParam","substr","toParam","console","log"],"mappings":"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","file":"utils.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.relationDirective = exports.cypherDirective = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nexports.parseArgs = parseArgs;\nexports.cypherDirectiveArgs = cypherDirectiveArgs;\nexports.isMutation = isMutation;\nexports.isAddRelationshipMutation = isAddRelationshipMutation;\nexports.typeIdentifiers = typeIdentifiers;\nexports.isGraphqlScalarType = isGraphqlScalarType;\nexports.isArrayType = isArrayType;\nexports.lowFirstLetter = lowFirstLetter;\nexports.innerType = innerType;\nexports.innerFilterParams = innerFilterParams;\nexports.extractQueryResult = extractQueryResult;\nexports.computeSkipLimit = computeSkipLimit;\nexports.extractSelections = extractSelections;\nexports.fixParamsForAddRelationshipMutation = fixParamsForAddRelationshipMutation;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction parseArgs(args, variableValues) {\n  // get args from selection.arguments object\n  // or from resolveInfo.variableValues if arg is a variable\n  // note that variable values override default values\n\n  if (!args) {\n    return {};\n  }\n\n  if (args.length === 0) {\n    return {};\n  }\n\n  return args.reduce(function (acc, arg) {\n    switch (arg.value.kind) {\n      case 'IntValue':\n        acc[arg.name.value] = parseInt(arg.value.value);\n        break;\n      case 'FloatValue':\n        acc[arg.name.value] = parseFloat(arg.value.value);\n        break;\n      case 'Variable':\n        acc[arg.name.value] = variableValues[arg.name.value];\n        break;\n      default:\n        acc[arg.name.value] = arg.value.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction getDefaultArguments(fieldName, schemaType) {\n  // get default arguments for this field from schema\n\n  try {\n    return schemaType._fields[fieldName].args.reduce(function (acc, arg) {\n      acc[arg.name] = arg.defaultValue;\n      return acc;\n    }, {});\n  } catch (err) {\n    return {};\n  }\n}\n\nfunction cypherDirectiveArgs(variable, headSelection, schemaType, resolveInfo) {\n  var defaultArgs = getDefaultArguments(headSelection.name.value, schemaType);\n  var queryArgs = parseArgs(headSelection.arguments, resolveInfo.variableValues);\n\n  var args = (0, _stringify2.default)((0, _assign2.default)(defaultArgs, queryArgs)).replace(/\\\"([^(\\\")\"]+)\\\":/g, ' $1: ');\n\n  return args === '{}' ? '{this: ' + variable + args.substring(1) : '{this: ' + variable + ',' + args.substring(1);\n}\n\nfunction isMutation(resolveInfo) {\n  return resolveInfo.operation.operation === 'mutation';\n}\n\nfunction isAddRelationshipMutation(resolveInfo) {\n  return resolveInfo.operation.operation === 'mutation' && (resolveInfo.fieldName.startsWith('Add') || resolveInfo.fieldName.startsWith('add')) && resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.directives.filter(function (x) {\n    return x.name.value === 'MutationMeta';\n  }).length > 0;\n}\n\nfunction typeIdentifiers(returnType) {\n  var typeName = innerType(returnType).toString();\n  return {\n    variableName: lowFirstLetter(typeName),\n    typeName: typeName\n  };\n}\n\nfunction isGraphqlScalarType(type) {\n  return type.constructor.name === 'GraphQLScalarType' || type.constructor.name === 'GraphQLEnumType';\n}\n\nfunction isArrayType(type) {\n  return type.toString().startsWith('[');\n}\n\nfunction lowFirstLetter(word) {\n  return word.charAt(0).toLowerCase() + word.slice(1);\n}\n\nfunction innerType(type) {\n  return type.ofType ? innerType(type.ofType) : type;\n}\n\n// handles field level schema directives\n// TODO: refactor to handle Query/Mutation type schema directives\nvar directiveWithArgs = function directiveWithArgs(directiveName, args) {\n  return function (schemaType, fieldName) {\n    function fieldDirective(schemaType, fieldName, directiveName) {\n      return schemaType.getFields()[fieldName].astNode.directives.find(function (e) {\n        return e.name.value === directiveName;\n      });\n    }\n\n    function directiveArgument(directive, name) {\n      return directive.arguments.find(function (e) {\n        return e.name.value === name;\n      }).value.value;\n    }\n\n    var directive = fieldDirective(schemaType, fieldName, directiveName);\n    var ret = {};\n    if (directive) {\n      _assign2.default.apply(Object, [ret].concat((0, _toConsumableArray3.default)(args.map(function (key) {\n        return (0, _defineProperty3.default)({}, key, directiveArgument(directive, key));\n      }))));\n    }\n    return ret;\n  };\n};\n\nvar cypherDirective = exports.cypherDirective = directiveWithArgs('cypher', ['statement']);\nvar relationDirective = exports.relationDirective = directiveWithArgs('relation', ['name', 'direction']);\n\nfunction innerFilterParams(selections) {\n  var queryParams = '';\n\n  if (selections && selections.length && selections[0].arguments && selections[0].arguments.length) {\n    var filters = selections[0].arguments.filter(function (x) {\n      return x.name.value !== 'first' && x.name.value !== 'offset';\n    }).map(function (x) {\n      var filterValue = (0, _stringify2.default)(x.value.value).replace(/\\\"([^(\\\")\"]+)\\\":/g, '$1:'); // FIXME: support IN for multiple values -> WHERE\n      return x.name.value + ': ' + filterValue;\n    });\n\n    queryParams = '{' + filters.join(',') + '}';\n  }\n  return queryParams;\n}\n\nfunction argumentValue(selection, name, variableValues) {\n  var arg = selection.arguments.find(function (a) {\n    return a.name.value === name;\n  });\n  if (!arg) {\n    return null;\n  } else if (!arg.value.value && name in variableValues && arg.value.kind === 'Variable') {\n    return variableValues[name];\n  } else {\n    return arg.value.value;\n  }\n}\n\nfunction extractQueryResult(_ref2, returnType) {\n  var records = _ref2.records;\n\n  var _typeIdentifiers = typeIdentifiers(returnType),\n      variableName = _typeIdentifiers.variableName;\n\n  return isArrayType(returnType) ? records.map(function (record) {\n    return record.get(variableName);\n  }) : records.length ? records[0].get(variableName) : null;\n}\n\nfunction computeSkipLimit(selection, variableValues) {\n  var first = argumentValue(selection, 'first', variableValues);\n  var offset = argumentValue(selection, 'offset', variableValues);\n\n  if (first === null && offset === null) return '';\n  if (offset === null) return '[..' + first + ']';\n  if (first === null) return '[' + offset + '..]';\n  return '[' + offset + '..' + (parseInt(offset) + parseInt(first)) + ']';\n}\n\nfunction extractSelections(selections, fragments) {\n  // extract any fragment selection sets into a single array of selections\n  return selections.reduce(function (acc, cur) {\n    if (cur.kind === 'FragmentSpread') {\n      return [].concat((0, _toConsumableArray3.default)(acc), (0, _toConsumableArray3.default)(fragments[cur.name.value].selectionSet.selections));\n    } else {\n      return [].concat((0, _toConsumableArray3.default)(acc), [cur]);\n    }\n  }, []);\n}\n\nfunction fixParamsForAddRelationshipMutation(params, resolveInfo) {\n  // FIXME: find a better way to map param name in schema to datamodel\n  var mutationMeta = void 0,\n      fromTypeArg = void 0,\n      toTypeArg = void 0;\n\n  try {\n    mutationMeta = resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.directives.filter(function (x) {\n      return x.name.value === 'MutationMeta';\n    })[0];\n  } catch (e) {\n    throw new Error('Missing required MutationMeta directive on add relationship directive');\n  }\n\n  try {\n    fromTypeArg = mutationMeta.arguments.filter(function (x) {\n      return x.name.value === 'from';\n    })[0];\n\n    toTypeArg = mutationMeta.arguments.filter(function (x) {\n      return x.name.value === 'to';\n    })[0];\n  } catch (e) {\n    throw new Error('Missing required argument in MutationMeta directive (relationship, from, or to)');\n  }\n  //TODO: need to handle one-to-one and one-to-many\n\n  var fromType = fromTypeArg.value.value,\n      toType = toTypeArg.value.value,\n      fromVar = lowFirstLetter(fromType),\n      toVar = lowFirstLetter(toType),\n      fromParam = resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.arguments[0].name.value.substr(fromVar.length),\n      toParam = resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.arguments[1].name.value.substr(toVar.length);\n\n  params[toParam] = params[resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.arguments[1].name.value];\n\n  params[fromParam] = params[resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.arguments[0].name.value];\n\n  delete params[resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.arguments[1].name.value];\n\n  delete params[resolveInfo.schema.getMutationType().getFields()[resolveInfo.fieldName].astNode.arguments[0].name.value];\n\n  console.log(params);\n\n  return params;\n}"]}